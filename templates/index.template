<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
  </head>
  <body style="padding: 10px">
    <h3>Solar Snoop</h3>

    <p>Keep an eye on your solar production and get notifications when your system's net generation is positive!</p>

    {{ if .UserId }}
    <table style="border-spacing: 10px; border-collapse: separate">
      <tr>
	<td>UserId:</td><td>{{ .UserId }}</td>
      </tr>
      <tr>
	<td>Systems:</td>
	<td>
	  
	  {{ range .Systems }}
	    <div>[ {{.SystemId}}: "{{.Name}}" ]</div>
          {{ end }}
	  
        </td>
      </tr>
    </table>
    <div style="padding-top: 30px">
      <a class="btn btn-primary" href="/logout">logout</a>
    </div>
    {{ else }}
    <div style="padding-top: 30px">
      <a class="btn btn-primary" href="https://api.enphaseenergy.com/oauth/authorize?response_type=code&client_id={{.OAuthClientId}}&redirect_uri={{.CallbackUrl}}">login</a>
    </div>
    {{ end }}

    <div style="padding-top: 20px">
      <img src="/static/logo.png" height="20%" width="20%">
    </div>
  </body>
</html>
